# playwright-extra [![GitHub Workflow Status](https://img.shields.io/github/workflow/status/berstend/puppeteer-extra/Test/master)](https://github.com/berstend/puppeteer-extra/actions) [![Discord](https://img.shields.io/discord/737009125862408274)](http://scraping-chat.cf) [![npm](https://img.shields.io/npm/v/playwright-extra.svg)](https://www.npmjs.com/package/playwright-extra)

> A modular plugin framework for [playwright](https://github.com/microsoft/playwright) to enable cool [plugins](#plugins) through a clean interface.

## Installation

> ‚ö° **This is not publicly released yet:** [Please read this for beta version installation instructions](https://github.com/berstend/puppeteer-extra/issues/454).

```bash
yarn add playwright playwright-extra
# - or -
npm install playwright playwright-extra
```

<details>
 <summary>Changelog</summary>

- v4.2
  - Initial public release

</details>

## Quickstart

```js
// playwright-extra is a drop-in replacement for playwright,
// it augments the installed playwright with plugin functionality
// Note: Instead of chromium you can use firefox and webkit as well.
const { chromium } = require('playwright-extra')

// import and configure the recaptcha plugin
const RecaptchaPlugin = require('@extra/recaptcha')
const recaptcha = RecaptchaPlugin({
  provider: {
    id: '2captcha',
    token: 'XXXXXXX' // Replace this with your own 2captcha api key
  }
})

// add the plugin to playwright
chromium.use(recaptcha)

// playwright usage as normal
chromium.launch({ headless: true }).then(async browser => {
  const page = await browser.newPage()
  await page.goto('https://www.google.com/recaptcha/api2/demo')

  // That's it, a single line of code to solve reCAPTCHAs and hCaptchas üéâ
  await page.solveRecaptchas()

  await Promise.all([
    page.waitForNavigation(),
    page.click(`#recaptcha-demo-submit`)
  ])
  await page.screenshot({ path: 'response.png', fullPage: true })
  await browser.close()
})
```

The above example uses the [`recaptcha`](/packages/plugin-recaptcha) plugin, which needs to be installed as well:

```bash
yarn add @extra/recaptcha
# - or -
npm install @extra/recaptcha
```

If you'd like to see debug output just run your script like so:

```bash
DEBUG=automation-extra,automation-extra-plugin:* node myscript.js
```

### More examples

<details>
 <summary><strong>TypeScript usage</strong></summary><br/>

`playwright-extra` and most plugins are written in TS, so you get perfect type support out of the box. :)

```ts
import { chromium } from 'playwright-extra'
// if you need types as well:
import { chromium, Playwright } from 'playwright-extra'
```

</details>

---

## Plugins

### üè¥ [`@extra/recaptcha`](/packages/plugin-recaptcha)

- Solves reCAPTCHAs and hCaptchas automatically, using a single line of code: `page.solveRecaptchas()`
- First plugin to support Playwright & Puppeteer, Chrome, Firefox and Webkit.

### [`@extra/humanize`](/packages/plugin-humanize)

- Humanizes input gestures (use realistic mouse movements on `page.click()`, etc)

**Note**

_`playwright-extra` is new, we're in the process of porting over existing [`puppeteer-extra`] plugins with Firefox & Webkit support. If you depend on having a large list of pre-made plugins available we suggest you use [`puppeteer-extra`] for the moment. See also: [Playwright vs Puppeteer](https://github.com/berstend/puppeteer-extra/wiki/Playwright-vs-Puppeteer)_

**Write your own plugin**

Making custom plugins which work with Playwright and Puppeteer is easy and fun. It might even help making your own code base more maintainable and modular. Head over to the documentation here: [`automation-extra-plugin`](https://github.com/berstend/puppeteer-extra/tree/master/packages/automation-extra-plugin)

---

## API

<!--
    Documentation is auto-generated by a custom fork of documentation.js
    More info: https://github.com/berstend/documentation-markdown-themes/wiki#documentationjs-with-markdown-theme-support
    Update this documentation by updating the source code.
-->

#### Table of Contents

- [addExtra(launcher)](#addextralauncher)
- [chromium()](#chromium)
- [firefox()](#firefox)
- [webkit()](#webkit)
- [errors()](#errors)
- [selectors()](#selectors)
- [devices()](#devices)

### [addExtra(launcher)](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L23-L25)

- `launcher` **PlaywrightBrowserLauncher** Playwright (or compatible) browser launcher

Returns: **PlaywrightExtra**

Augment the provided Playwright browser launcher with plugin functionality.

Using `addExtra` will always create a fresh PlaywrightExtra instance.

Example:

```javascript
import playwright from 'playwright'
import { addExtra } from 'playwright-extra'

const chromium = addExtra(playwright.chromium)
chromium.use(plugin)
```

---

### [chromium()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L55-L55)

This object can be used to launch or connect to Chromium, returning instances of ChromiumBrowser.

The **default exports** will behave exactly the same as the regular playwright
(just with extra plugin functionality) and can be used as a drop-in replacement.

Behind the scenes it will try to require either `playwright`
or `playwright-core` from the installed dependencies.

Please note that due to imports being cached this will result in a single
PlaywrightExtra instance, even when used in different files. If you need multiple
instances (e.g. different plugins) please use `addExtra`.

Example:

```javascript
// javascript import
const { chromium } = require('playwright-extra')

// typescript/es6 module import
import { chromium } from 'playwright-extra'

// Add plugins
chromium.use(...)
```

---

### [firefox()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L57-L57)

This object can be used to launch or connect to Firefox, returning instances of FirefoxBrowser.

---

### [webkit()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L59-L59)

This object can be used to launch or connect to WebKit, returning instances of WebKitBrowser.

---

### [errors()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L62-L62)

Returns playwright specific errors

---

### [selectors()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L64-L64)

Selectors can be used to install custom selector engines.

---

### [devices()](https://github.com/berstend/puppeteer-extra/blob/7a9082f9837f2403099e2181d639aa0065c51ba9/packages/playwright-extra/src/index.ts#L66-L66)

Returns a list of devices to be used with browser.newContext([options]) or browser.newPage([options]).

---

## License

Copyright ¬© 2018 - 2021, [berstendÃîÃÑÃìÃêÃÑÕõÕòÃÄÃ≤Ã´Ã°ÃπÃ†ÃñÕöÕì](https://github.com/berstend). Released under the MIT License.

<!--
  Reference links
-->

[playwright-extra]: https://github.com/berstend/puppeteer-extra/tree/master/packages/playwright-extra
[puppeteer-extra]: https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra
[`puppeteer-extra`]: https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra
